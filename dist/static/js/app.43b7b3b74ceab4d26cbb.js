webpackJsonp([0],{0:function(t,n){},"3hI3":function(t,n){},BrIV:function(t,n){},NHnr:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("7+uW"),a=e("/ocq"),s={render:function(){var t=this.$createElement;return(this._self._c||t)("button",{staticClass:"button-small pure-button",class:{"pure-button-primary":this.active},on:{click:this.clickBtn}},[this._v(this._s(this.btnTxt))])},staticRenderFns:[]};var i={name:"Vmall",data:function(){return{products:[]}},components:{BuyBtn:e("VU/8")({name:"BuyBtn",data:function(){return{active:!0,btnTxt:"加入购物车"}},methods:{clickBtn:function(){this.active?(this.active=!1,this.btnTxt="取消购买",this.$emit("addToCart")):(this.active=!0,this.btnTxt="加入购物车",this.$emit("removeFromCart"))}}},s,!1,function(t){e("fJ5u")},null,null).exports},methods:{addToCart:function(t){this.vHandler.$emit("addToCart",t)},removeFromCart:function(t){this.vHandler.$emit("removeFromCart",t)}},beforeMount:function(){this.$http.get("./static/data/products.json").then(function(t){this.products=t.data},function(t){console.log("Fail: ",t.status,t.statusText)})}},o={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("keep-alive",[e("div",{staticClass:"pure-g"},t._l(t.products,function(n){return e("div",{key:n.id,staticClass:"pure-u-1-4"},[e("div",{staticClass:"panel"},[e("img",{staticClass:"pure-img",attrs:{src:n.pic}}),t._v(" "),e("h3",[t._v(t._s(n.name))]),t._v(" "),e("p",[t._v(t._s(t._f("currency")(n.price)))]),t._v(" "),e("div",{staticClass:"panel-btn"},[e("buy-btn",{on:{addToCart:function(e){t.addToCart(n.id)},removeFromCart:function(e){t.removeFromCart(n.id)}}})],1)])])}))])},staticRenderFns:[]};var c=e("VU/8")(i,o,!1,function(t){e("njEu")},null,null).exports,u={name:"MyCart",data:function(){return{msg:"您还未选购任何商品 ...",productArr:[]}},computed:{priceTotal:function(){for(var t=0,n=0;n<this.productArr.length;n++)t+=parseFloat(this.productArr[n].price);return t}},methods:{removeFromCart:function(t){this.vHandler.$emit("removeFromCart",t)}},beforeMount:function(){this.$http.get("./static/data/products.json").then(function(t){for(var n=this.vHandler.productIds.sort(),e=0;e<n.length;e++)this.productArr.push(t.data[n[e]-1])},function(t){console.log("Fail: ",t.status,t.statusText)})}},d={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return t.productArr.length>0?e("table",{staticClass:"pure-table pure-table-horizontal"},[t._m(0),t._v(" "),e("tbody",[t._l(t.productArr,function(n,r){return e("tr",[e("td",[t._v(t._s(r+1))]),t._v(" "),e("td",[e("img",{staticClass:"pure-img",attrs:{src:n.pic}})]),t._v(" "),e("td",[t._v(t._s(n.name))]),t._v(" "),e("td",[t._v(t._s(n.price))]),t._v(" "),e("td",[e("button",{staticClass:"button-del pure-button",on:{click:function(e){t.productArr.splice(r,1),t.removeFromCart(n.id)}}},[t._v("删除")])])])}),t._v(" "),e("tr",{staticClass:"count-row"},[e("td",{attrs:{colspan:"3"}},[t._v("合计：")]),t._v(" "),e("td",{attrs:{colspan:"2"}},[t._v(t._s(t.priceTotal))])])],2)]):e("h3",[t._v(t._s(t.msg))])},staticRenderFns:[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("thead",[e("tr",[e("th",[t._v("#")]),t._v(" "),e("th",[t._v("商品图片")]),t._v(" "),e("th",[t._v("商品名称")]),t._v(" "),e("th",[t._v("商品价格")]),t._v(" "),e("th",[t._v("操作")])])])}]};var l=e("VU/8")(u,d,!1,function(t){e("jS/0")},"data-v-6a41c27a",null).exports;r.a.use(a.a);var v=new a.a({routes:[{path:"/",component:c},{path:"/vmall",component:c},{path:"/my-cart",component:l}]}),p=e("uQjs"),m={name:"Menus",data:function(){return{activeId:1,menus:[{id:1,name:"VMall",path:"/vmall"},{id:2,name:"My Cart",path:"/my-cart"}],cartCount:0}},methods:{switchMenu:function(t){this.activeId=t}},beforeMount:function(){var t=this;t.vHandler.$on("addToCart",function(n){t.vHandler.productIds.push(n),t.cartCount=t.vHandler.productIds.length}),t.vHandler.$on("removeFromCart",function(n){for(var e=0;e<t.vHandler.productIds.length;e++)if(t.vHandler.productIds[e]==n){t.vHandler.productIds.splice(e,1);break}t.cartCount=t.vHandler.productIds.length})},mounted:function(){var t=window.location.hash.split("#")[1];if(t.length>1)for(var n=0;n<this.menus.length;n++)if(t==this.menus[n].path){this.activeId=this.menus[n].id;break}}},h={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"pure-menu pure-menu-horizontal"},[e("ul",{staticClass:"pure-menu-list"},[t._l(t.menus,function(n){return e("li",{key:n.id,staticClass:"pure-menu-item",class:[n.id==t.activeId?"pure-menu-selected":""],on:{click:function(e){t.switchMenu(n.id)}}},[e("router-link",{staticClass:"pure-menu-link",attrs:{to:n.path}},[t._v(t._s(n.name))])],1)}),t._v(" "),t.cartCount?e("div",{staticClass:"cart-count"},[t._v(t._s(t.cartCount))]):t._e()],2)])},staticRenderFns:[]};var f={name:"App",components:{Menus:e("VU/8")(m,h,!1,function(t){e("BrIV")},"data-v-641ab7b6",null).exports}},_={render:function(){var t=this.$createElement,n=this._self._c||t;return n("div",{attrs:{id:"app"}},[n("menus"),this._v(" "),n("div",{attrs:{id:"view"}},[n("router-view")],1)],1)},staticRenderFns:[]};var C=e("VU/8")(f,_,!1,function(t){e("3hI3")},null,null).exports;r.a.config.productionTip=!0,r.a.use(p.a),r.a.filter("currency",function(t){var n=/\d{1,3}(?=(\d{3})+$)/g;return"￥"+parseFloat(t).toFixed(2).toString().replace(/^(\d+)((\.\d+)?)$/,function(t,e,r){return e.replace(n,"$&,")+r})}),r.a.prototype.vHandler=new r.a({data:function(){return{productIds:[]}}}),new r.a({el:"#app",router:v,components:{App:C},template:"<App/>"})},fJ5u:function(t,n){},"jS/0":function(t,n){},njEu:function(t,n){}},["NHnr"]);
//# sourceMappingURL=app.43b7b3b74ceab4d26cbb.js.map